(()=>{"use strict";const e=e=>`  \n  <a href="#/inicio" class="header-logo"><span>denStore</span></a>\n  <div class="header-menu">\n    <a href="#/nuevosproductos"name="releases" class="header-menu-items"><span>Productos Nuevos</span></a>\n    <a href="#/promociones"name="promotions" class="header-menu-items"><span>Promociones</span></a>\n  </div>\n  <div class="header-cart">\n    <a href="#/cart"class="header-cart-title">\n      <img src="./src/images/cart.svg" alt="go to cart" />\n    </a>\n    <div class="header-cart-counter"><span>Carrito</span><span>(${e.counter})</span></div>\n    <span class="header-cart-total">$${e.total}</span>\n  </div>`,t=()=>{const e=document.getElementById("itemsContainer");document.getElementById("searcher").innerHTML="";const t=JSON.parse(sessionStorage.getItem("cartContent")),n=JSON.parse(sessionStorage.getItem("cartTotals"));e.innerHTML=((e,t)=>`\n  <div class="cartActions"><span>Vaciar Carrito</span>\n  <button class="cartActions-btn" name="emptyCart" ><img src="./src/images/borrar.svg" alt="Borrar Todo" name="emptyCart"/></button>\n</div>\n<div class="cartTitle"><span></span><span></span>\n  <div class="cartTitle-item"><span>Nombre</span><span>Marca</span><span>Precio</span></div>\n  <div class="cartTitle-cart"><span>Cantidad</span><span>Total </span></div>\n</div>\n${e.map((e=>`\n  <div class="cartContainer">\n  <button name="removeone" id="${e.id}">-</button>\n  <figure class="cartContainer-imgBox"><img src="${e.photo1}" alt="image of ${e.name}"/></figure>\n  <div class="cartContainer-details"><span class="cartContainer-details-text">${e.name}</span><span class="cartContainer-details-text">${e.brand}</span><span class="cartContainer-details-price">$${e.price}</span></div>\n  <div class="cartContainer-oncart">\n    <input id="${e.id}"name="cartcount" class="cartContainer-oncart-counter" type="number" value="${e.counter}"/><span class="cartContainer-oncart-total">$${e.total}</span>\n  </div>\n</div>`)).join("")}\n<div class="cartTotals"><span></span><span></span>\n  <div class="cartTitle-item"><span> </span></div>\n  <div class="cartTitle-cart"><span>${t.counter}</span><span>$${t.total}</span></div>\n</div>`)(t,n)},n=function(e){return`\n    <section class="itemsContainer">\n    ${e.map((e=>`\n        <article class="item">\n        <h3 class="item-name">${e.name}</h3>\n        <figure class="item-imgBox"><img src="${e.photo1}" alt="${e.name}"/></figure>\n        <button class="item-btn" name="add${e.id}"><img src="./src/images/cart.svg" alt="add cart" name="add${e.id}"/><span id="add${e.id}" >add</span></button>\n        <div class="item-brand"> <span>${e.brand}</span></div>\n        <button name="info${e.id}" class="item-details"  >+info</button><span class="item-price">$ ${e.price}</span>\n        </article>\n        `)).join("")}\n        </section> `},s=class{filtered(e,t){const n=e;return"Nuevos"===t?n.filter((e=>e.newRelease)):"Promociones"===t?n.filter((e=>e.promotions)):n}renderTitle(e){document.getElementById("Category").innerHTML=e}search(e,t){const n=e;return n.filter((e=>e.name.includes(t)))||n}},i=[{id:1,name:"cafe",brand:"International",likes:1,dislikes:0,priceInitial:30,newRelease:!0,promotions:!1,discount:0,price:30,photo1:"./src/images/cafe.svg",photo2:"./src/images/like.svg",photo3:"./src/images/hero.svg",description:"this is description"},{id:2,name:"hamburguesa",brand:"burger",likes:10,dislikes:2,priceInitial:120,newRelease:!1,promotions:!0,discount:20,price:100,photo1:"./src/images/hamburguesa.svg",photo2:"./src/images/like.svg",photo3:"./src/images/hero.svg",description:"this is description"},{id:3,name:"helado",brand:"ice cream",likes:5,dislikes:1,priceInitial:60,newRelease:!0,promotions:!1,discount:0,price:60,photo1:"./src/images/helado.svg",photo2:"./src/images/like.svg",photo3:"./src/images/hero.svg",description:"this is description"},{id:4,name:"pizza",brand:"picsa",likes:2,dislikes:2,priceInitial:200,newRelease:!1,promotions:!0,discount:50,price:150,photo1:"./src/images/pizza.svg",photo2:"./src/images/like.svg",photo3:"./src/images/hero.svg",description:"this is description"},{id:5,name:"rosquilla",brand:"kiko",likes:0,dislikes:2,priceInitial:20,newRelease:!0,promotions:!1,discount:0,price:20,photo1:"./src/images/rosquilla.svg",photo2:"./src/images/like.svg",photo3:"./src/images/hero.svg",description:"this is description"},{id:6,name:"refresco",brand:"soda's",likes:0,dislikes:0,priceInitial:15,newRelease:!1,promotions:!0,discount:5,price:10,photo1:"./src/images/soda.svg",photo2:"./src/images/like.svg",photo3:"./src/images/hero.svg",description:"this is description"}],o=()=>{const e=document.getElementById("searcher"),t=document.getElementById("itemsContainer"),o=location.hash.slice(1).split("/")[1]||"",a=new s,r={promociones:"Promociones",nuevosproductos:"Nuevos",inicio:"inicio"};let c="";if(""===o||"inicio"===o)e.innerHTML=' \n      <section class="actions">\n        <h2 id="Category"class="actions-category">Catalogo</h2>\n        <div class="actions-searcher">\n          <input name="searcher" type="text" placeholder="busca un articulo" />\n        </div>\n      </>\n      <section class="itemsContainer"></section>',t.innerHTML=n(i);else{c=r[o];const s=a.filtered(i,c);console.log(c),e.innerHTML=' \n      <section class="actions">\n        <h2 id="Category"class="actions-category">Catalogo</h2>\n        <div class="actions-searcher">\n          <input name="searcher" type="text" placeholder="busca un articulo" />\n        </div>\n      </>\n      <section class="itemsContainer"></section>',a.renderTitle(c),t.innerHTML=n(s)}},a={"/":o,"/cart":t,"/404":()=>{document.getElementById("itemsContainer").innerHTML='\n  <div class="Error404">\n    <h2>Error 404</h2>\n    <p>UPS, Pagina no encontrada</p>\n  <div>\n  '},"/promociones":o,"/nuevosproductos":o,"/inicio":o},r=()=>{const t=(e=>{const t={cart:"/cart",promociones:"/promociones",nuevosproductos:"/nuevosproductos",inicio:"/inicio"};if(""===e)return"/";for(let n in t)return(n=e)?`/${e}`:"/404"})(location.hash.slice(1).split("/")[1]||""),n=JSON.parse(sessionStorage.getItem("cartTotals")),s=document.getElementById("header"),i=document.getElementById("hero"),o=document.getElementById("footer");let r=a[t];s.innerHTML=e(n),i.innerHTML=' \n  <section class="hero">\n        <figure class="hero-imgContainer">\n          <img src="./src/images/hero.svg" alt="big photo" />\n        </figure>\n      </section>\n      ',r(),o.innerHTML="\n  <span>info@thisstore.com</span>\n  "},c=function(e){const t=i.filter((t=>t.id==e)),n=document.getElementById("modalContainer");n.classList.remove("hide"),n.innerHTML=(e=>{const t=JSON.parse(sessionStorage.getItem("cartContent")).filter((t=>t.id==e.id)),n=t.length>0?t[0].counter:0,s=t.length>0?t[0].total:0;return`\n  <div name="modal"class="modal">\n  <figure class="modal-imgBox"><img src="${e.photo1}" alt="photo of ${e.name}" id="mainphoto${e.id}"/></figure>\n  <div class="modal-info"><span class="modal-info-name">${e.name}</span><span class="modal-info-price">$ ${e.price}</span>\n    <div class="modal-info-btns">\n      <button name="like1${e.id}"><img name="like1${e.id}" src="./src/images/like.svg" alt="like button"/></button>\n      <button name="like2${e.id}"><img name="like2${e.id}" src="./src/images/hand.svg" alt="dislike button"/></button><span id="likecounter">${e.likes}</span><span id="dislikecounter">${e.dislikes}</span>\n    </div>\n  </div>\n  <figure class="modal-gallery">\n    <button class="modal-gallery-btn" name="pics1${e.id}"><img name="pics1${e.id}" src="${e.photo1}" alt="product's photo 1"/></button>\n    <button class="modal-gallery-btn" name="pics2${e.id}"><img name="pics2${e.id}" src="${e.photo2}" alt="product's photo 2"/></button>\n    <button class="modal-gallery-btn" name="pics3${e.id}"><img name="pics3${e.id}" src="${e.photo3}" alt="product's photo 3"/></button>\n  </figure>\n  <div class="modal-aside">\n    <h3>En carrito</h3>\n    <div class="modal-aside-buying">\n      <div class="modal-aside-buying-btns">\n        <button name="bAddM1${e.id}">-</button>\n        <button name="bAddM2${e.id}">+</button>\n      </div><span id="modalCartCounter" class="modal-aside-buying-counter">${n}</span><span id="modalCartTotal" class="modal-aside-buying-toPay">$${s}</span>\n    </div>\n    <p class="modal-aside-description">${e.description}</p>\n  </div>\n</div>\n  `})(t[0])},l=function(){document.getElementById("modalContainer").classList.add("hide")},d=(n,s)=>{const i=document.getElementById("header"),o=JSON.parse(sessionStorage.getItem("cartTotals")),a=JSON.parse(sessionStorage.getItem("cartContent"));for(let e of a)if(e.id==n){const t=e.price*s-e.total,n=s-e.counter;e.counter=s,e.total=e.price*s,o.counter=o.counter+n,o.total=o.total+t}sessionStorage.setItem("cartContent",JSON.stringify(a)),sessionStorage.setItem("cartTotals",JSON.stringify(o)),i.innerHTML=e(o),t()};sessionStorage.setItem("cartTotals",JSON.stringify({counter:0,total:0})),sessionStorage.setItem("cartContent",JSON.stringify([])),window.addEventListener("load",r),window.addEventListener("hashchange",r),window.addEventListener("keydown",(e=>{27==e.keyCode&&l()})),window.addEventListener("click",(n=>{const s=n.target.name,o=n.target.id,a=s?s.slice(0,4):"",r=s?s.slice(0,3):"",d=o?o.slice(0,3):"";if("add"===r||"add"===d){(t=>{const n=document.getElementById("header"),s=JSON.parse(sessionStorage.getItem("cartTotals")),o=JSON.parse(sessionStorage.getItem("cartContent")),a=i.filter((e=>e.id==t)),r=o.filter((e=>e.id==t));if(r.length>0){const e=r[0].id;for(let t of o)t.id==e&&(t.counter+=1,t.total=t.total+t.price,s.total=s.total+t.price)}else{const e={id:a[0].id,image:a[0].photo1,name:a[0].name,brand:a[0].brand,price:a[0].price,counter:1,total:a[0].price,photo1:a[0].photo1};s.total=s.total+e.price,o.push(e)}s.counter+=1,n.innerHTML=e(s),sessionStorage.setItem("cartTotals",JSON.stringify(s)),sessionStorage.setItem("cartContent",JSON.stringify(o))})(s?s.slice(3,4):o.slice(3,4))}else if("modalContainer"===o)l();else if("info"===a){const e=s?s.slice(4,5):"";c(e)}else if("emptyCart"===s)(n=>{const s={counter:0,total:0},i=document.getElementById("header");sessionStorage.setItem("cartTotals",JSON.stringify(s)),sessionStorage.setItem("cartContent",JSON.stringify([])),i.innerHTML=e(s),t()})();else if("removeone"===s){const s=n.target.id;s&&(n=>{console.log("removing");const s=document.getElementById("header"),i={counter:0,total:0},o=JSON.parse(sessionStorage.getItem("cartContent")).filter((e=>e.id!=n));for(let e of o)i.counter=i.counter+e.counter,i.total=i.total+e.total;sessionStorage.setItem("cartTotals",JSON.stringify(i)),sessionStorage.setItem("cartContent",JSON.stringify(o)),s.innerHTML=e(i),t()})(s)}else"like"===a?(e=>{const t=e.slice(4,5),n=1*e.slice(5,6),s=i.filter((e=>e.id==n));if(1==t){const e=document.getElementById("likecounter"),t=s[0].likes+=1;e.innerHTML=t}else{const e=document.getElementById("dislikecounter"),t=s[0].dislikes+=1;e.innerHTML=t}})(s):"pics"===a?(e=>{const t=1*e.slice(4,5),n=1*e.slice(5,6),s=document.getElementById(`mainphoto${n}`),o=i.filter((e=>e.id==n));let a;a=1===t?o[0].photo1:2===t?o[0].photo2:o[0].photo3,s.setAttribute("src",a)})(s):"bAdd"===a&&(t=>{const n=document.getElementById("header"),s=document.getElementById("modalCartCounter"),o=document.getElementById("modalCartTotal"),a=JSON.parse(sessionStorage.getItem("cartTotals")),r=JSON.parse(sessionStorage.getItem("cartContent")),c=1*t.slice(5,6),l=1*t.slice(6,7),d=i,m=r.filter((e=>e.id==l));if(m.length>0){let t=0,i=0;1===c?(t=m[0].counter>0?-1:0,i=m[0].counter>0?-1*m[0].price:0):(t=1,i=m[0].price),a.counter=1*a.counter+t,a.total=1*a.total+i;for(let e of r)e.id===l&&(e.counter=1*e.counter+t,e.total=1*e.total+i,s.innerHTML=e.counter,o.innerHTML="$"+e.total);n.innerHTML=e(a)}else{if(0!==m.length||2!==c)return void console.log("caca");{const t=d.filter((e=>e.id==l)),i={id:t[0].id,name:t[0].name,brand:t[0].brand,price:t[0].price,counter:1,total:t[0].price,photo1:t[0].photo1};a.counter+=1,a.total=a.total+t[0].price,r.push(i),n.innerHTML=e(a),s.innerHTML=1,o.innerHTML="$"+t[0].price}}sessionStorage.setItem("cartTotals",JSON.stringify(a)),sessionStorage.setItem("cartContent",JSON.stringify(r))})(s)})),window.addEventListener("change",(e=>{const t=e.target.name;console.log(t);const o=1*e.target.value;if("searcher"===t)(e=>{console.log(e);const t=document.getElementById("itemsContainer"),o=(new s).search(i,e);t.innerHTML=0!=o.length?n(o):' \n  <div class="Error404">\n  <h2>Sin Resultados</h2>\n<div>'})(e.target.value);else if("cartcount"==t)if(o<0){const t=e.target.id;d(t,0)}else{const t=e.target.id;d(t,o)}}))})();